# Avatar

O componente `Avatar` é utilizado para exibir imagens de perfil de usuários, com suporte para upload de imagem e exibição de monograma quando não há imagem disponível.

## Importação

```tsx
import { Avatar } from '@platformbuilders/fluid-react-native';
```

## Uso Básico

```tsx
<Avatar
  size={50}
  image={{ uri: 'https://exemplo.com/imagem.jpg' }}
  name="John Doe"
/>
```

## Com Monograma

Quando não há imagem disponível ou quando `displayMonogram` está ativo, o componente exibirá as iniciais do nome fornecido:

```tsx
<Avatar size={50} name="John Doe" displayMonogram={true} />
```

## Upload de Imagem

O componente suporta funcionalidade de upload de imagem quando `onUpload` é fornecido:

```tsx
<Avatar
  size={100}
  name="John Doe"
  onUpload={(image) => console.log('Imagem selecionada:', image)}
/>
```

## Personalização

O Avatar pode ser personalizado com diferentes tamanhos e estilos de borda:

```tsx
<Avatar
  size={80}
  borderWidth={3}
  borderColor="#FF5500"
  showBorder={true}
  name="John Doe"
/>
```

## Controle Programático

Usando uma ref, você pode controlar o Avatar programaticamente:

```tsx
import React, { useRef } from 'react';
import { Button, View } from 'react-native';
import { Avatar } from '@platformbuilders/fluid-react-native';

const ProfileScreen = () => {
  const avatarRef = useRef(null);

  const handleOpenPicker = () => {
    avatarRef.current?.openPicker();
  };

  const handleGetImage = () => {
    const image = avatarRef.current?.getUploadImage();
    console.log('Imagem atual:', image);
  };

  const handleClearImage = () => {
    avatarRef.current?.clearUploadImage();
  };

  return (
    <View style={{ alignItems: 'center', gap: 16 }}>
      <Avatar
        ref={avatarRef}
        size={120}
        name="Maria Silva"
        onUpload={(image) => console.log('Upload:', image)}
      />

      <Button title="Abrir Seletor" onPress={handleOpenPicker} />
      <Button title="Obter Imagem" onPress={handleGetImage} />
      <Button title="Limpar Imagem" onPress={handleClearImage} />
    </View>
  );
};
```

## Propriedades

| Propriedade          | Tipo                   | Padrão             | Descrição                                                     |
| -------------------- | ---------------------- | ------------------ | ------------------------------------------------------------- |
| `image`              | ImageSource            | -                  | Fonte da imagem a ser exibida                                 |
| `size`               | number                 | 50                 | Tamanho do avatar em pixels                                   |
| `name`               | string                 | -                  | Nome do usuário para gerar o monograma quando não há imagem   |
| `displayMonogram`    | boolean                | true               | Se deve exibir o monograma quando não há imagem               |
| `showBorder`         | boolean                | true               | Se deve exibir a borda ao redor do avatar                     |
| `borderWidth`        | number                 | 2                  | Largura da borda em pixels                                    |
| `borderColor`        | string                 | -                  | Cor da borda (usa a cor primária do tema se não especificada) |
| `onPress`            | function               | -                  | Função chamada quando o avatar é pressionado                  |
| `onUpload`           | function               | -                  | Função chamada após o upload de uma imagem                    |
| `imageQuality`       | number                 | 0.5                | Qualidade da imagem ao fazer upload (0.0 - 1.0)               |
| `animatedLoading`    | boolean                | true               | Se deve mostrar animação de carregamento                      |
| `monogramStyle`      | StyleProp\<TextStyle\> | -                  | Estilo adicional para o monograma                             |
| `accessibility`      | string                 | 'Upload de Avatar' | Rótulo de acessibilidade                                      |
| `accessibilityLabel` | string                 | -                  | Rótulo de acessibilidade alternativo                          |
| `testID`             | string                 | -                  | ID para testes                                                |
| `id`                 | string                 | -                  | ID do componente                                              |

## Métodos da Ref

O componente `Avatar` expõe os seguintes métodos através de uma ref:

| Método             | Descrição                                             |
| ------------------ | ----------------------------------------------------- |
| `openPicker`       | Abre o seletor de imagens                             |
| `getUploadImage`   | Retorna a URI da imagem atualmente carregada          |
| `clearUploadImage` | Limpa a imagem atual, voltando ao estado de monograma |

## Exemplos

### Avatar com Imagem de Perfil

```tsx
import React from 'react';
import { View } from 'react-native';
import { Avatar, Typography } from '@platformbuilders/fluid-react-native';

const ProfileHeader = () => {
  return (
    <View style={{ flexDirection: 'row', alignItems: 'center', padding: 16 }}>
      <Avatar
        size={80}
        image={{ uri: 'https://exemplo.com/perfil.jpg' }}
        name="Maria Silva"
        showBorder={true}
        borderWidth={2}
        onPress={() => console.log('Avatar clicado')}
      />

      <View style={{ marginLeft: 16 }}>
        <Typography variant="lg" style={{ fontWeight: 'bold' }}>
          Maria Silva
        </Typography>
        <Typography variant="sm" style={{ color: '#666666' }}>
          Desenvolvedora Front-end
        </Typography>
      </View>
    </View>
  );
};
```

### Avatar com Funcionalidade de Upload

```tsx
import React, { useState } from 'react';
import { View } from 'react-native';
import {
  Avatar,
  Button,
  Typography,
} from '@platformbuilders/fluid-react-native';

const ProfileEditor = () => {
  const [profileImage, setProfileImage] = useState(null);
  const [isSaving, setIsSaving] = useState(false);

  const handleUpload = (imageUri) => {
    setProfileImage(imageUri);
  };

  const handleSave = async () => {
    if (!profileImage) return;

    setIsSaving(true);
    try {
      // Simulando upload para um servidor
      await new Promise((resolve) => setTimeout(resolve, 2000));
      console.log('Imagem salva com sucesso:', profileImage);
    } finally {
      setIsSaving(false);
    }
  };

  return (
    <View style={{ alignItems: 'center', padding: 16, gap: 16 }}>
      <Typography variant="lg">Editar Perfil</Typography>

      <Avatar
        size={120}
        name="Carlos Oliveira"
        image={profileImage ? { uri: profileImage } : undefined}
        onUpload={handleUpload}
        borderColor="#3366FF"
        borderWidth={3}
      />

      <Typography variant="sm" style={{ color: '#666666' }}>
        Toque no avatar para alterar sua foto
      </Typography>

      <Button
        children="Salvar Alterações"
        variant="filled"
        colorVariant="primary"
        loading={isSaving}
        disabled={!profileImage || isSaving}
        onPress={handleSave}
      />
    </View>
  );
};
```

### Grid de Avatares

```tsx
import React from 'react';
import { View } from 'react-native';
import { Avatar, Typography } from '@platformbuilders/fluid-react-native';

const TeamMembers = () => {
  const team = [
    { id: '1', name: 'Ana Santos', image: 'https://exemplo.com/ana.jpg' },
    { id: '2', name: 'Pedro Costa', image: 'https://exemplo.com/pedro.jpg' },
    { id: '3', name: 'Lúcia Ferreira', image: undefined },
    { id: '4', name: 'João Silva', image: 'https://exemplo.com/joao.jpg' },
    { id: '5', name: 'Mariana Oliveira', image: undefined },
    { id: '6', name: 'Rafael Souza', image: 'https://exemplo.com/rafael.jpg' },
  ];

  return (
    <View style={{ padding: 16 }}>
      <Typography variant="lg" style={{ marginBottom: 16 }}>
        Nossa Equipe
      </Typography>

      <View style={{ flexDirection: 'row', flexWrap: 'wrap', gap: 16 }}>
        {team.map((member) => (
          <View key={member.id} style={{ alignItems: 'center', width: 80 }}>
            <Avatar
              size={60}
              name={member.name}
              image={member.image ? { uri: member.image } : undefined}
              displayMonogram={!member.image}
              borderColor="#3366FF"
              showBorder={!!member.image}
            />
            <Typography
              variant="xs"
              style={{ marginTop: 8, textAlign: 'center' }}
              numberOfLines={2}
            >
              {member.name}
            </Typography>
          </View>
        ))}
      </View>
    </View>
  );
};
```
